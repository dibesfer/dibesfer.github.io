<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookies</title>
    <style>
        body {
            font-family: sans-serif
        }
    </style>
</head>

<body>

    <h1>Cookies</h1>


    <div>
        <p>Your cookie</p>
        <div id="yourCookie"></div>
    </div>


    <p>Example cookie</p>
    <div id="example"></div>

    <p>Create a cookie</p>
    <input type="text" id="inputKey" placeholder="Key">
    <input type="text" id="inputValue" placeholder="Value">
    <button id="submitCookieButton">Submit cookie</button>
    

    <p>To delete a cookie: add </p>
    <p>;expires=Thu, 01 Jan 1970 00:00:00 UTC</p>
    <p>to the value of your Cookie</p>

    <script>

//expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;
// ;expires=Thu, 01 Jan 1970 00:00:00 GMT
        let stringKey
        let stringValue

        let stringCookie

        submitCookieButton.addEventListener("click", submitCookie)

        yourCookie.textContent = document.cookie
        // document.cookie = "usuario=Fer; expires=Mon, 01 Jul 2025 14:13:00 GMT; path=/;secure domain=localhost; samesite=Strict"

        // document.cookie = "sexo=luis;administrador=María; expires=Mon, 01 Jul 2025 14:13:00 GMT; path=/;secure domain=localhost; samesite=Strict"

        let stringExampleCookie = `document.cookie = "sexo=luis;administrador=María; expires=Mon, 01 Jul 2025 14:13:00 GMT; path=/;secure domain=localhost; samesite=Strict"`

        example.textContent = stringExampleCookie

        function leerGalletas(nombre){

            

            let galletas = document.cookie.split(";")
            console.log(galletas)
            if (!galletas || galletas[0] == "") {
                yourCookie.textContent = "null"
                return
            }
            let galletitas = []
            for (let galleta of galletas){
                 galletitas.push(galleta.trim().split("="));
            }
            
            yourCookie.innerHTML = "Number of cookies " + galletitas.length

            yourCookie.innerHTML = `
                <table>
                    <tr>
                        <th>Clave</th>
                        <th>Valor</th>
                    </tr>
            `

            galletitas.forEach((elemento)=>{
                yourCookie.innerHTML += `
                <tr>
                    <td>${elemento[0]} </td>
                    <td>${elemento[1]}</td>
                </tr>
                `
            })

            yourCookie.innerHTML += "</table>"
            
        }

        leerGalletas()

        function submitCookie() {
            stringKey = inputKey.value
            stringValue = inputValue.value
            stringCookie = stringKey + "=" + stringValue
            if (stringKey) {
                
                document.cookie = stringCookie.trim() 
                
                //Thu, 01 Jan 1970 00:00:00 GMT


                alert("Cookie saved: " + stringCookie)
                leerGalletas()
            }
            else {
                alert("Nothing to save")
            }
        }

    </script>

</body>

</html>