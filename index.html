<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>dibesfer</title>
  <!-- SEO -->
  <meta name="author" content="dibesfer - Ferr√°n Minero" />
  <meta name="description" content="Dibujos y escritos de Fer." />
  <meta name="keywords"
    content="dibesfer github info information informaci√≥n p√°gina web website. Ferr√°n Minero. Developer Illustrator Writer. Dev Illustrauthor. Symbocracy." />

  <!-- Responsivo -->
  <meta content='width=device-width, initial-scale=1.0' name='viewport' />
  <link rel="icon" type="image/x-icon" href="blue-error-logo.png">
  <!-- Meta im√°gen y descripci√≥n que aparecer√° embebida en algunas redes sociales -->
  <meta property='og:image' content='/blue-error-logo-big.png' />
  <meta property='og:description' content='Information about dibesfer' />
  <meta property="og:title" content="info.dibesfer">
  <link rel="stylesheet" href="estilo.css">
  <!-- Google Analystics tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WQ043CLMXE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-WQ043CLMXE');
  </script>
  <!-- Google Analytics End -->
   <!-- SUPABASE cdn -->
   <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>

<body>
  <main>

    <h1><img class="pixel" src="blue-error-logo.png" width="30" alt=""> <a href="/">info.dibesfer
      </a></h1>
    <h3>Dibujos y escritos de Fer </h1>

      <hr>
      <h1>¬°Hola Mundo! :)</h1>
      <p>Bienvenido a la p√°gina de dibesfer en github.com</p>
      <h3>üè† Principal</h3>
      <p><a href="https://dibesfer.com">dibesfer.com</a><br><a
          href="https://dibesfer.codeberg.page">dibesfer.codeberg.page</a></p>
      <h3>‚ÑπÔ∏è Info</h3>
      <p><a href="https://info.dibesfer.com">info.dibesfer.com</a><br><a
          href="https://dibesfer.github.io">dibesfer.github.io</a></p>
      <h3>üìù Blog</h3>
      <p><a href="https://blog.dibesfer.com">blog.dibesfer.com</a><br><a
          href="https://dibesfer.blogspot.com">dibesfer.blogspot.com</a></p>
      <h3>ü¶£ Mastodon</h3>
      <p><a rel="me" href="https://mastodon.social/@dibesfer" target="_blank">mastodon.social/@dibesfer</a>
      </p>
      <br>
      <hr>


      <p class="textCenter">
        üñºÔ∏è <a href="https://instagram.com/dibesfer" target="_blank">Instagram
        </a> |

        üìΩÔ∏è <a href="https://youtube.com/@dibesfer" target="_blank">

          Youtube

        </a>
      </p>
      <p class="textCenter">Puedes apoyarme a trav√©s de </p>


      <div style="display: flex; justify-content: center;">

        <a href="https://www.paypal.com/donate/?hosted_button_id=PCZ5UK8KP36HL">
          <div style="background-color: gold; padding: 17px; border-radius: 50px; width: max-content;">
            <img style="display:block;width: 75px;"
              src="https://upload.wikimedia.org/wikipedia/commons/3/39/PayPal_logo.svg" alt="Paypal donate button">
          </div>
        </a>

        <a href="https://liberapay.com/dibesfer/donate" target="_blank">
          <img style="max-height: 50px ; border-radius: 5px;margin-left:10px" alt="Donate using Liberapay"
            src="https://www.bahnzumberg.at/wp-content/uploads/2022/06/liberapay_logo_black-on-yellow_1024px.png">
        </a>
      </div>
      <p>‚úâÔ∏è contact <a href="mailto:dibesfer@gmail.com">dibesfer@gmail.com</a></p>
      <hr><br>
      <p>Total visits: <span id="totalVisits"></span></p>
      <h3>P√°gina oficial <a class="specialLink" href="https://dibesfer.com">dibesfer.com</a></h3><br>
      
  </main>

  <footer>


  </footer>
  <script>
    
    const supabaseUrl = 'https://qugihsopwjemzakhrbvw.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1Z2loc29wd2plbXpha2hyYnZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTg0OTQxMDksImV4cCI6MjAxNDA3MDEwOX0.1q5fBic1cjueaiP2-p6W19C68ye8FTPLFne2a-fKwZ8'
    const database = supabase.createClient(supabaseUrl, supabaseKey)

    const totalVisits = document.getElementById("totalVisits")
    //REALTIME 
    // Create a function to handle inserts
    const handleInserts = (payload) => {
      //console.log('Change received!', payload)
      getOnlyResources("visits", "github")
    }

    // Listen to inserts
    database
      .channel('visits')
      .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'visits' }, handleInserts)
      .subscribe()

    async function insertResources(tableName) {
      const { data, error } = await database
        .from(tableName)
        .update([
          {
            github: currentVisits
            //url: window.location.href
            //email: param1,
            //username: param1.split("@")[0]
          },
        ]).eq("id", 1)
        .select()

      //getResources("visits", "github")
    }

    /* .from('visits')
    .update({ other_column: 'otherValue' })
    
    .select()
     */

    //insertResources("visits")
    getResources("visits", "github")
    var currentVisits = 0
    async function getResources(tableName, rowName) {
      const res = await database.from(tableName).select(rowName)//.range(3000,5000)
      /* console.log(res.data[0].github) */
      currentVisits = res.data[0].github
      currentVisits++
      insertResources("visits")
      if (res.data[0] != undefined) {
        totalVisits.textContent = currentVisits
      }
    }

    async function getOnlyResources(tableName, rowName) {
      const res = await database.from(tableName).select(rowName)//.range(3000,5000)
      //console.log(res.data[0].dibesfer)

      if (res.data[0] != undefined) {

        totalVisits.textContent = res.data[0].github
      }
    }


  </script>
</body>

</html>